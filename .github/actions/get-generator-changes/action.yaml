name: Get Generator Changes
description: Run diff check on all generators

outputs:
  seed:
    description: "Whether any seed files changed"
    value: ${{ steps.seed-changes.outputs.any_changed }}
  ruby:
    description: "Whether any ruby files changed"
    value: ${{ steps.ruby-changes.outputs.any_changed }}
  ruby-v2:
    description: "Whether any ruby-v2 files changed"
    value: ${{ steps.ruby-v2-changes.outputs.any_changed }}
  openapi:
    description: "Whether any openapi files changed"
    value: ${{ steps.openapi-changes.outputs.any_changed }}
  python:
    description: "Whether any python files changed"
    value: ${{ steps.python-changes.outputs.any_changed }}
  postman:
    description: "Whether any postman files changed"
    value: ${{ steps.postman-changes.outputs.any_changed }}
  java:
    description: "Whether any java files changed"
    value: ${{ steps.java-changes.outputs.any_changed }}
  typescript:
    description: "Whether any typescript files changed"
    value: ${{ steps.typescript-changes.outputs.any_changed }}
  go:
    description: "Whether any go files changed"
    value: ${{ steps.go-changes.outputs.any_changed }}
  csharp:
    description: "Whether any csharp files changed"
    value: ${{ steps.csharp-changes.outputs.any_changed }}
  php:
    description: "Whether any php files changed"
    value: ${{ steps.php-changes.outputs.any_changed }}
  swift:
    description: "Whether any swift files changed"
    value: ${{ steps.swift-changes.outputs.any_changed }}
  rust:
    description: "Whether any rust files changed"
    value: ${{ steps.rust-changes.outputs.any_changed }}

runs:
  using: "composite"
  steps:
    - name: Checkout repo
      uses: actions/checkout@v4
      with:
        # Get sufficient history to check for changes
        fetch-depth: 200

    - name: Check for seed changes
      id: seed-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          .github/actions/cached-seed/action.yaml
          .github/actions/check-for-changed-files/action.yaml
          .github/actions/get-generator-changes/action.yaml
          .github/actions/install/action.yaml
          .github/workflows/seed.yml
          packages/seed/**
          packages/ir-sdk/fern/apis/**
          packages/cli/generation/ir-generator/**
          test-definitions/**
          test-definitions-openapi/**

    - name: Check for ruby changes
      id: ruby-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/ruby/**
          seed/ruby-sdk/**
          seed/ruby-model/**

    - name: Check for ruby-v2 changes
      id: ruby-v2-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/ruby-v2/**
          seed/ruby-sdk-v2/**

    - name: Check for openapi changes
      id: openapi-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/openapi/**
          seed/openapi/**

    - name: Check for python changes
      id: python-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/python/**
          seed/pydantic/**
          seed/pydantic-v2/**
          seed/python-sdk/**
          seed/fastapi/**

    - name: Check for postman changes
      id: postman-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/postman/**
          seed/postman/**

    - name: Check for java changes
      id: java-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/java/**
          seed/java-sdk/**
          seed/java-model/**
          seed/java-spring/**

    - name: Check for typescript changes
      id: typescript-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          typescript:
            generators/typescript/**
            seed/ts-sdk/**
            seed/ts-express/**

    - name: Check for go changes
      id: go-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/go/**
          seed/go-sdk/**
          seed/go-model/**
          seed/go-fiber/**

    - name: Check for csharp changes
      id: csharp-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/csharp/**
          seed/csharp-sdk/**
          seed/csharp-model/**

    - name: Check for php changes
      id: php-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/php/**
          seed/php-sdk/**
          seed/php-model/**

    - name: Check for swift changes
      id: swift-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/swift/**
          seed/swift-sdk/**

    - name: Check for rust changes
      id: rust-changes
      uses: ./.github/actions/check-for-changed-files
      with:
        files: |
          generators/rust/**
          seed/rust-sdk/**
