types:
  MovieId: string

  Movie:
    properties:
      id: MovieId
      title: string
      rating:
        type: double
        docs: The rating scale is one to five stars

  CreateMovieRequest:
    properties:
      title: string
      rating: double

  UpdateMovieRequest:
    # Note that we don't need to mark this as unstable because it is only referenced by an unstable endpoint
    # The diff tool automatically detects this and considers this type unstable
    properties:
      title: string
      rating: double

service:
  auth: false
  base-path: /movies
  endpoints:
    createMovie:
      docs: Add a movie to the database using the movies/*/... path.
      method: POST
      path: /create-movie
      request: CreateMovieRequest
      response:
        type: MovieId
        status-code: 201

    updateMovie:
      method: PUT
      availability:
        status: in-development
        message: "Unreleased endpoint."
      path: /{movieId}
      path-parameters:
        movieId: MovieId
      request: UpdateMovieRequest
      response: Movie

    getMovie:
      method: GET
      path: /{movieId}
      path-parameters:
        movieId: MovieId
      response: Movie
      errors:
        - MovieDoesNotExistError

    listMovies:
      method: GET
      path: /
      response: list<Movie>

errors:
  MovieDoesNotExistError:
    status-code: 404
    type: MovieId
