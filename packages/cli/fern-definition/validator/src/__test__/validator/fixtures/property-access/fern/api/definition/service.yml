imports:
  root: __package__.yml

service:
  auth: false
  base-path: /users
  endpoints:
    createUser:
      docs: Create a new user with password (write-only field)
      method: POST
      path: ""
      request: root.User
      response: root.User
      examples:
        - request:
            profile:
              name: John Doe
              ssn: "123-45-6789"
              verification: {}
            password: "secretPassword123"
          response:
            body:
              id: "user_123"
              email: "john@example.com"
              profile:
                name: John Doe
                verification:
                  verified: "pending"

    getUser:
      docs: Get user by ID (returns read-only fields like id and email)
      method: GET
      path: /{userId}
      path-parameters:
        userId:
          docs: The unique identifier of the user
          type: string
      response: root.User
      examples:
        - path-parameters:
            userId: "user_123"
          response:
            body:
              id: "user_123"
              email: "john@example.com"
              profile:
                name: John Doe
                verification:
                  verified: "verified"

    updateUser:
      docs: Update user information (can send write-only fields like password and ssn)
      method: PUT
      path: /{userId}
      path-parameters:
        userId:
          docs: The unique identifier of the user
          type: string
      request: root.User
      response: root.User
      examples:
        - path-parameters:
            userId: "user_123"
          request:
            profile:
              name: John Doe Updated
              verification: {}
              ssn: "987-65-4321"
            password: "newPassword456"
          response:
            body:
              id: "user_123"
              email: "john@example.com"
              profile:
                name: John Doe Updated
                verification:
                  verified: "verified"

    getUserOrAdmin:
      docs: Get a user or admin (tests undiscriminated union)
      method: GET
      path: /{userId}/user-or-admin
      path-parameters:
        userId:
          docs: The unique identifier
          type: string
      response: root.UserOrAdmin
      examples:
        - name: ReturnsUser
          path-parameters:
            userId: "user_123"
          response:
            body:
              id: "user_123"
              email: "john@example.com"
              profile:
                name: John Doe
                verification:
                  verified: "verified"
        - name: ReturnsAdmin
          path-parameters:
            userId: "admin_456"
          response:
            body:
              id: "admin_456"
              email: "admin@example.com"
              adminLevel: "super"
              profile:
                name: Admin User
                verification:
                  verified: "verified"

    getUserOrAdminDiscriminated:
      docs: Get a discriminated union type
      method: GET
      path: /{userId}/discriminated
      path-parameters:
        userId:
          docs: The unique identifier
          type: string
      response: root.UserOrAdminDiscriminated
      examples:
        - name: ReturnsUser
          path-parameters:
            userId: "user_123"
          response:
            body:
              type: user
              normal: "base-normal"
              foo:
                normal: "foo-normal"
                read: "read-value"
              id: "user_123"
              email: "john@example.com"
              profile:
                name: John Doe
                verification:
                  verified: "verified"
        - name: ReturnsAdmin
          path-parameters:
            userId: "admin_456"
          response:
            body:
              type: admin
              normal: "base-normal"
              foo:
                normal: "foo-normal"
                read: "read-value"
              id: "admin_456"
              email: "admin@example.com"
              adminLevel: "super"
              profile:
                name: Admin User
                verification:
                  verified: "verified"
        - name: ReturnsEmpty
          path-parameters:
            userId: "empty_789"
          response:
            body:
              type: empty

    createFoo:
      docs: Create a Foo object with mixed access properties
      method: POST
      path: /foo
      request: root.Foo
      response: root.Foo
      examples:
        - request:
            normal: "normal-value"
            write: "write-only-value"
          response:
            body:
              normal: "normal-value"
              read: "generated-read-value"

    createAdmin:
      docs: Create an admin user (tests extension with access modifiers)
      method: POST
      path: /admin
      request: root.Admin
      response: root.Admin
      examples:
        - request:
            adminLevel: "moderator"
            password: "adminPassword123"
            profile:
              name: Admin User
              ssn: "555-55-5555"
              verification: {}
          response:
            body:
              id: "admin_789"
              email: "admin@example.com"
              adminLevel: "moderator"
              profile:
                name: Admin User
                verification:
                  verified: "verified"
