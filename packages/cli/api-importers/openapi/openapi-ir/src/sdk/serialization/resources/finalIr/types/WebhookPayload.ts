/**
 * This file was auto-generated by Fern from our API Definition.
 */

import * as serializers from "../../../index";
import * as FernOpenapiIr from "../../../../api/index";
import * as core from "../../../../core";
import { MultipartRequest } from "./MultipartRequest";

export const WebhookPayload: core.serialization.Schema<serializers.WebhookPayload.Raw, FernOpenapiIr.WebhookPayload> =
    core.serialization
        .union("type", {
            json: core.serialization.object({
                value: core.serialization.lazy(() => serializers.Schema),
            }),
            multipart: MultipartRequest,
        })
        .transform<FernOpenapiIr.WebhookPayload>({
            transform: (value) => {
                switch (value.type) {
                    case "json":
                        return FernOpenapiIr.WebhookPayload.json(value.value);
                    case "multipart":
                        return FernOpenapiIr.WebhookPayload.multipart(value);
                    default:
                        return value as FernOpenapiIr.WebhookPayload;
                }
            },
            untransform: ({ _visit, ...value }) => value as any,
        });

export declare namespace WebhookPayload {
    export type Raw = WebhookPayload.Json | WebhookPayload.Multipart;

    export interface Json {
        type: "json";
        value: serializers.Schema.Raw;
    }

    export interface Multipart extends MultipartRequest.Raw {
        type: "multipart";
    }
}
