openapi: 3.0.3
info:
  title: Test spec for anyOf [number, string] with string examples
  version: 1.0.0
  description: |
    This spec tests that when a property has anyOf: [number, string] with examples: ["2500"],
    the example generation prefers the string variant that can use the provided example
    over the number variant that would generate a fallback (1.1).

paths:
  /create-payment:
    post:
      operationId: createPayment
      requestBody:
        required: true
        description: Create a payment with an amount
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentRequest"
      responses:
        "200":
          description: Payment created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentResponse"

components:
  schemas:
    PaymentRequest:
      type: object
      required:
        - amount
      properties:
        amount:
          anyOf:
            - type: number
            - type: string
          description: |
            The payment amount. Can be a number or string.
            When examples are provided as strings, the string variant should be preferred.
          examples:
            - "2500"
            - "1000.50"
        currency:
          type: string
          examples:
            - "USD"

    PaymentResponse:
      type: object
      properties:
        id:
          type: string
          examples:
            - "pay_123456"
        amount:
          anyOf:
            - type: number
            - type: string
          description: |
            The payment amount echoed back
          examples:
            - "2500"
        status:
          type: string
          examples:
            - "completed"
