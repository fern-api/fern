openapi: 3.0.3
info:
  title: Settlement
  description: Settlement
  version: '1'
  termsOfService: https://www.payroc.com/terms
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com
security:
- bearerAuth: []
tags:
  - name: Settlement
    description: Settlement information.

paths:
  /disputes:
    get:
      tags: [Settlement]
      summary: List disputes
      description: Retrieve a list of disputes.
      operationId: getdisputes
      parameters:
        - $ref: '../../../common/parameters/before-v1.yaml#/components/parameters/before'
        - $ref: '../../../common/parameters/after-v1.yaml#/components/parameters/after'
        - $ref: '../../../common/parameters/limit-v1.yaml#/components/parameters/limit'
        - $ref: './parameters-v1.yaml#/components/parameters/date'
        - $ref: '../../../common/parameters/merchant-id-v1.yaml#/components/parameters/merchantId'
      responses:
        '200':
          description: Successful request. Returns a paginated list of disputes.
          content:
            application/json:
              schema:
                type: object
                allOf:
                - $ref: '../../../common/schemas/common/paginated-list-v1.yaml#/components/schemas/paginatedList'
                - type: object
                  properties:
                    data:
                      type: array
                      description: Array of dispute objects.
                      items:
                        $ref: '#/components/schemas/dispute'
                  required: [data] 
              examples:
                paginatedList:
                  $ref: './example-responses-v1.yaml#/components/examples/paginatedDisputes'
                noActivity:
                  $ref: '../../../common/responses/no-activity-v1.yaml#/components/examples/noActivity'        
           
        '400':
          description: Validation error
          content:
            application/problem+json:
              schema:
                $ref: '../../../common/responses/errors/400-v1.yaml#/components/schemas/400'
              examples: 
                parameterError:
                  $ref: '../../../common/responses/rfc-errors/400-v1.yaml#/components/examples/parameterError'
                paginationError:
                  $ref: '../../../common/responses/rfc-errors/400-v1.yaml#/components/examples/paginationError'
        '401':
          $ref: '../../../common/responses/errors/401-v1.yaml#/components/responses/401'
        '403':
          $ref: '../../../common/responses/errors/403-v1.yaml#/components/responses/403'
        '406':
          $ref: '../../../common/responses/errors/406-v1.yaml#/components/responses/406'
        '500':
          $ref: '../../../common/responses/errors/500-v1.yaml#/components/responses/500' 
  /disputes/{disputeId}/statuses:
    get:
      tags: [Settlement]
      summary: List dispute statuses
      description: Retrieve the status history for a specific dispute.
      operationId: getdisputesStatuses
      parameters:
        - $ref: './parameters-v1.yaml#/components/parameters/disputeId'
      responses:
        '200':
          description: Successful request. Returns the status history for a specific dispute.
          content:
            application/json:
              schema:
                type: array
                description: Collection of status
                items:
                  $ref: '#/components/schemas/disputeStatus' 
        '400':
          description: Validation error
          content:
            application/problem+json:
              schema:
                $ref: '../../../common/responses/errors/400-v1.yaml#/components/schemas/400'
              examples: 
                parameterError:
                  $ref: '../../../common/responses/rfc-errors/400-v1.yaml#/components/examples/parameterError'
        '401':
          $ref: '../../../common/responses/errors/401-v1.yaml#/components/responses/401'
        '403':
          $ref: '../../../common/responses/errors/403-v1.yaml#/components/responses/403'
        '404':
          $ref: '../../../common/responses/errors/404-v1.yaml#/components/responses/404'
        '406':
          $ref: '../../../common/responses/errors/406-v1.yaml#/components/responses/406'
        '500':
          $ref: '../../../common/responses/errors/500-v1.yaml#/components/responses/500' 

components:
  schemas:
    dispute: 
      type: object
      title: dispute
      description: Object that contains information about the dispute.
      properties:
        disputeId:
          type: integer
          description: Unique identifier of the dispute.
          example: 12345
        disputeType:
          type: string
          description: Type of dispute.
          enum:
            - prearbitration
            - issuerReversal
            - firstDisputeWithReversal
            - firstDispute
        currentStatus:
          allOf:
           - $ref: '#/components/schemas/disputeStatus'
           - type: object
             properties:
               link:
                $ref: '../../../common/schemas/common/link/link-v1.yaml#/components/schemas/link'
        createdDate:
          type: string
          format: date
          description: Date that we received the dispute. The format of this value is **YYYY-MM-DD**.
          example: '2024-02-20'
        lastModifiedDate:
          type: string
          format: date
          description: Date that the dispute was last changed. The format of this value is **YYYY-MM-DD**.
          example: '2024-02-25'
        receivedDate:
          type: string
          format: date
          description: Date that the acquiring bank received the dispute. The format of this value is **YYYY-MM-DD**.
          example: '2024-02-18'
        description:
          type: string
          description: Description of the dispute.
        referenceNumber:
          type: string
          description: Reference number from the acquiring bank.
        disputeAmount:
          type: integer
          description: Dispute amount. We return the value in the currency's lowest denomination, for example, cents.
        feeAmount:
          type: integer
          description: Value of the fees for the dispute. We return the value in the currency's lowest denomination, for example, cents.
        firstDispute:
          type: boolean
          description: Indicates if this is the first dispute for the transaction.
          example: true
        authorizationCode:
          type: string
          description: Authorization code.
        currency:
          type: string
          description: Currency of the dispute.
        card:
          $ref: '../../../common/schemas/settlement/card-summary-v1.yaml#/components/schemas/cardSummary'
        merchant:
          $ref: '../../../common/schemas/settlement/merchant-summary-v1.yaml#/components/schemas/merchantSummary'
        transaction:
          $ref: '../../../common/schemas/settlement/transaction-summary-v1.yaml#/components/schemas/transactionSummary'
    
    disputeStatus:
      type: object
      title: dispute status
      description: Object that contains information about the current status of the dispute.
      properties:
        disputeStatusId:
          type: integer
          description: Unique identifier of the dispute status.
          example: 12345
        status:
          type: string
          description: Status of the dispute.
          enum:
            - prearbitrationInProcess
            - prearbitrationAccepted
            - prearbitrationDeclined
            - arbitrationFiledWithCardBand
            - arbitrationFundsToBeReturned
            - arbitrationLost
            - arbitrationSettledPartialAmount
            - precomplianceInProcess
            - precomplianceAccepted
            - precomplianceDeclined
            - complianceFiledWithCardBand
            - complianceLost
            - complianceSettledPartialAmount
            - invalid
            - issuerReversal
            - new
            - rejected
            - representmentInProgress
            - representmentFailed
            - representmentPaid
            - representmentReceived
            - stand
        statusDate:
          type: string
          format: date
          description: Date that the status changed. The format of this value is **YYYY-MM-DD**.
          example: '2024-02-01'
  
  securitySchemes:
    bearerAuth:
      $ref: '../../../common/security/bearer-auth.yaml#/components/securitySchemes/bearerAuth'
