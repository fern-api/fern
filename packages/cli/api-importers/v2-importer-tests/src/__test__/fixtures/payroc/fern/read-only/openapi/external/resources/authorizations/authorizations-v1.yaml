openapi: 3.0.3
info:
  title: Settlement
  description: Settlement
  version: '1'
  termsOfService: https://www.payroc.com/terms
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com
security:
- bearerAuth: []
tags:
  - name: Settlement
    description: Settlement information.

paths:
  /authorizations:
    get:
      tags: [Settlement]
      summary: List authorizations
      description: Retrieve a list of authorizations.
      operationId: getAuthorizations
      parameters:
        - $ref: '../../../common/parameters/before-v1.yaml#/components/parameters/before'
        - $ref: '../../../common/parameters/after-v1.yaml#/components/parameters/after'
        - $ref: '../../../common/parameters/limit-v1.yaml#/components/parameters/limit'
        - $ref: '../../../common/parameters/settlement-v1.yaml#/components/parameters/keyDate'
        - $ref: '../../../common/parameters/settlement-v1.yaml#/components/parameters/batchIdQuery'
        - $ref: '../../../common/parameters/merchant-id-v1.yaml#/components/parameters/merchantId'
      responses:
        '200':
          description: Successful request. Returns a paginated list of authorizations.
          content:
            application/json:
              schema:
                type: object
                allOf:
                - $ref: '../../../common/schemas/common/paginated-list-v1.yaml#/components/schemas/paginatedList'
                - type: object
                  properties:
                    data:
                      type: array
                      description: Array of authorization objects.
                      items:
                        $ref: '#/components/schemas/authorization'
                  required: [data] 
              examples:
                paginatedList:
                  $ref: './example-responses-v1.yaml#/components/examples/paginatedAuthorizations'
                noActivity:
                  $ref: '../../../common/responses/no-activity-v1.yaml#/components/examples/noActivity'         
        '400':
          description: Validation error
          content:
            application/problem+json:
              schema:
                $ref: '../../../common/responses/errors/400-v1.yaml#/components/schemas/400'
              examples:
                parameterError:
                  $ref: '../../../common/responses/rfc-errors/400-v1.yaml#/components/examples/parameterError'
                paginationError:
                  $ref: '../../../common/responses/rfc-errors/400-v1.yaml#/components/examples/paginationError'
        '401':
          $ref: '../../../common/responses/errors/401-v1.yaml#/components/responses/401'
        '403':
          $ref: '../../../common/responses/errors/403-v1.yaml#/components/responses/403'
        '406':
          $ref: '../../../common/responses/errors/406-v1.yaml#/components/responses/406'
        '500':
          $ref: '../../../common/responses/errors/500-v1.yaml#/components/responses/500'
  /authorizations/{authorizationId}:
    get:
      tags: [Settlement]
      summary: Retrieve authorization
      description: Retrieve a specific authorization.
      operationId: getAuthorization
      parameters:
        - $ref: './parameters-v1.yaml#/components/parameters/authorizationId'
      responses:
        '200':
          description: Successful request. Returns the requested authorization.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/authorization'    
        '400':
          $ref: '../../../common/responses/errors/400-v1.yaml#/components/responses/400'
        '401':
          $ref: '../../../common/responses/errors/401-v1.yaml#/components/responses/401'
        '403':
          $ref: '../../../common/responses/errors/403-v1.yaml#/components/responses/403'
        '404':
          $ref: '../../../common/responses/errors/404-v1.yaml#/components/responses/404'
        '406':
          $ref: '../../../common/responses/errors/406-v1.yaml#/components/responses/406'
        '500':
          $ref: '../../../common/responses/errors/500-v1.yaml#/components/responses/500'

components:
  schemas:
    authorization:
      type: object
      title: authorization
      description: Object that contains information about the authorization.
      properties:
        authorizationId:
          type: integer
          description: Unique identifier of the authorization.
          example: 12345
        createdDate:
          type: string
          format: date
          description: Date that we received the authorization. The format of this value is **YYYY-MM-DD**.
          example: '2024-01-30'
        lastModifiedDate:
          type: string
          format: date
          description: Date that the authorization was last changed. The format of this value is **YYYY-MM-DD**.
          example: '2024-01-30'
        authorizationResponse:
          type: string
          description: Code that indicates the response for the authorization.
          enum:
            - activityCountLimitExceeded
            - alreadyReversed
            - approved
            - approveVip
            - approveWithId
            - cannotVerifyPin
            - cardAuthenticationFailed
            - cardTypeVerificationError
            - cashRequestExceedsIssuerLimit
            - cashServiceNotAvailable
            - cidVerificationError
            - contactCardIssuer
            - cryptographicFailure
            - dailyThresholdExceeded
            - declineCvv2Failure
            - deny
            - denyAccountCanceled
            - denyClosedMerchant
            - denyNewCardIssued
            - denyPickUpCard
            - destinationCannotBeFoundForRouting
            - doNotHonor
            - duplicateTransmissionDetected
            - error
            - exceedsWithdrawalAmountLimit
            - expiredCard
            - fileTemporarilyUnavailable
            - forceStip
            - formatError
            - forwardToIssuer
            - functionNotSupported
            - honorWithId
            - incorrectCvv
            - incorrectPin
            - ineligibleForResubmission
            - insufficientFunds
            - invalidAccount
            - invalidAccountNumber
            - invalidAmount
            - invalidAuthorizationLifeCycle
            - invalidBillerInformation
            - invalidCardSecurityCode
            - invalidCurrencyCode
            - invalidMerchant
            - invalidResponse
            - invalidTransaction
            - issuerNotAvailable
            - issuerTimeout
            - issuerUnavailable
            - noActionTaken
            - noCardRecord
            - noCheckingAccount
            - noCreditAccount
            - noFinancialImpact
            - noReasonToDecline
            - noSavingsAccount
            - noSuchIssuer
            - partialApproval
            - partialAuthorization
            - pickUpCard
            - pickUpCardSpecialCondition
            - pinChangeRequestDeclined
            - pinCryptographicErrorFound
            - pinEntryTriesExceeded
            - pinNotChanged
            - pleaseCallIssuer
            - reenterTransaction
            - referToCardIssuer
            - referToCardIssuerSpecialCondition
            - restrictedCard
            - reversal
            - reversalDataInconsistent
            - revokeAllAuthorizationsOrder
            - scheduledTransactionstoppedByCardholder
            - securityViolation
            - successful
            - surchargeAmountNotPermitted
            - suspectFraud
            - systemMalfunction
            - transactionAmountExceedsApprovalAmount
            - transactionCannotBeCompleted
            - transactionNotAllowedAtMerchant
            - transactionNotAllowedAtTerminal
            - transactionNotPermitted
            - transactionNotPermittedToCardholder
            - unableToGoOnline
            - unableToLocateRecordInFile
            - unableToVerifyPin
            - unacceptablePin
            - unknown
            - unsafePin
        preauthorizationRequestAmount:
          type: integer
          description: Amount that the merchant requested for the authorization. We return the value in the currency's lowest denomination, for example, cents.
          example: 10000
        currency:
          type: string
          description: Currency of the authorization.
        batch:
          $ref: '../../../common/schemas/settlement/batch-summary-v1.yaml#/components/schemas/batchSummary'
        card:
          $ref: '../../../common/schemas/settlement/card-summary-v1.yaml#/components/schemas/cardSummary'
        merchant:
          $ref: '../../../common/schemas/settlement/merchant-summary-v1.yaml#/components/schemas/merchantSummary'
        transaction:
          $ref: '../../../common/schemas/settlement/transaction-summary-v1.yaml#/components/schemas/transactionSummary'

  securitySchemes:
    bearerAuth:
      $ref: '../../../common/security/bearer-auth.yaml#/components/securitySchemes/bearerAuth'
