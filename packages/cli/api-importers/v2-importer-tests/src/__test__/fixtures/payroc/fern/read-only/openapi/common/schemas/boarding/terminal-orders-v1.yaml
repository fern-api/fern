openapi: 3.0.3

paths: {}

info:
  title: Common Domain Models
  description: Common domain models that are shared across the Payroc API
  version: '1'
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com

tags:
  - name: Common schemas
    description: Common schemas that can be resued

components:
  schemas:
    terminalOrder:
      type: object
      properties:
        terminalOrderId:
          type: string
          description: Unique identifier of the terminal order.
          example: '12345'
        status:
          type: string
          description: Status of the terminal order.
          enum:
            - open
            - held
            - dispatched
            - fulfilled
            - cancelled
          example: open
        trainingProvider:
            type: string
            description: Indicates who provides training to the merchant for the solution.
            enum:
              - partner
              - payroc
            maxLength: 7
            default: partner
        shipping:
          type: object
          description: Object that contains the shipping details for the terminal order. If you don't provide a shipping address, we use the Doing Business As (DBA) address of the processing account.
          properties:
            preferences:
              type: object
              description: Object that contains the shipping preferences for the terminal order.
              properties:
                method:
                  type: string
                  description: |  
                    Shipping method for the terminal order. Send one of the following values:
                      - 'nextDay'- We schedule the order to be delivered the next day.
                      - 'ground' - We ship the order with ground shipping.
                  enum:
                    - nextDay
                    - ground
                  default: nextDay
                saturdayDelivery:
                  type: boolean
                  description: Indicates if we can schedule the terminal order to be delivered on a Saturday.
                  default: false
            address:
              type: object
              description: Object that contains the shipping address for the terminal order.
              properties:
                recipientName:
                  type: string
                  description: Name of the person receiving the shipment.
                  maxLength: 100
                businessName:
                  type: string
                  description: Name of the business receiving the shipment.
                  maxLength: 100
                addressLine1:
                  type: string
                  description: First line of the shipment address.
                  maxLength: 100
                addressLine2:
                  type: string
                  description: Second line of the shipment address.
                  maxLength: 100
                city:
                  type: string
                  description: City of the shipment address.
                  maxLength: 50
                state:
                  type: string
                  description: State of the shipment address.
                  maxLength: 30
                postalCode:
                  type: string
                  description: Postal code of the shipment address.
                  maxLength: 9  
                email: 
                  type: string
                  description: Contact email address for the shipment.
                  format: email
                  maxLength: 100
                phone:
                  type: string
                  description: Contact number for the shipment.
                  maxLength: 15
              required:
                - recipientName
                - addressLine1
                - city
                - state
                - postalCode
                - email 
        orderItems:
          type: array
          description: Array of orderItem objects. Provide a minimum of 1 order item and a maximum of 20 order items.
          items:
            type: object
            allOf:
              - $ref: '#/components/schemas/orderItem'
              - $ref: '#/components/schemas/links'
          minItems: 1
          maxItems: 20
        createdDate:
          type: string
          format: date-time
          readOnly: true
          description: Date that we received the terminal order.
          example: 2020-09-08T12:00:00.000Z
        lastModifiedDate:
          type: string
          format: date-time
          readOnly: true
          description: Date that the terminal order was last changed.
          example: 2020-09-09T12:00:00.000Z
      required:
        - terminalOrderId
        - status
        - orderItems
        - createdDate
        - lastModifiedDate
    orderItem:
      type: object
      properties:
        type:
          type: string
          description: Type of item. 
          enum:
            - solution
          maxLength: 8
        solutionTemplateId:
          type: string
          description: |
            Unique identifier of the solution. Send one of the following values:
            - `Roc Services_DX8000`
            - `Roc Services_DX4000`
            - `Roc Services_Web`
            - `Roc Services_Mobile`
            - `Payroc DX8000`
            - `Payroc DX4000`
            - `Payroc RX7000_Cloud`
            - `Payroc DX8000_Cloud`
            - `Payroc DX4000_Cloud`
            - `Payroc A920Pro`
            - `Payroc A80`
            - `Payroc A920Pro_Cloud`
            - `Payroc A80_Cloud`
            - `Roc Terminal Plus_N950`
            - `Roc Terminal Plus_N950-S`
            - `Roc Terminal Plus_X800`
            - `Gateway_Payroc`
            - `VAR_Only_TSYS`
            - `ROC Services Chipper3X`
            - `BBPOS Chipper 3X`
            - `Augusta EMV`
            - `Ingenico - AXIUM Full Functional Base`
            - `Pax A920 Charging Base`
            - `Pax A920 Comms Base`
          maxLength: 100
        solutionQuantity:
          type: number
          description: Quantity of the solution.
          format: integer
          default: 1
          maximum: 50        
        deviceCondition:
          type: string
          description: Indicates if the order contains a new item or a refurbished item.
          enum:
            - new
            - refurbished    
          maxLength: 11    
        solutionSetup:
          type: object
          description: Object that contains the settings for the solution, including gateway settings, device settings, and application settings.
          properties:
            timezone:
              $ref: '#/components/schemas/timezone'
            industryTemplateId:
              type: string
              description: | 
                Unique identifier of the industry template you want to apply to the solution. Send one of the following values:
                - `Retail`
                - `Restaurant`
                - `Moto`
                - `Ecommerce`
              maxLength: 100
            gatewaySettings:
              type: object
              description: Object that contains the gateway settings for the solution.
              properties:
                merchantPortfolioId:
                  type: string
                  description: Unique identifier of the merchant portfolio.
                  maxLength: 100
                merchantTemplateId:
                  type: string
                  description: Unique identifier of the gateway merchant template.
                  maxLength: 100
                userTemplateId:
                  type: string
                  description: Unique identifier of the gateway user template.
                  maxLength: 100
                terminalTemplateId:
                  type: string
                  description: Unique identifier of the gateway terminal template.
                  maxLength: 100
            applicationSettings:
              type: object
              description: Object that contains the application settings for the solution.
              properties:
                clerkPrompt:
                  type: boolean
                  description: Indicates if the terminal should prompt the clerk, for example, if the terminal should prompt when the clerk needs to enter an amount on the terminal.
                  example: true
                security:
                  type: object
                  description: Object that contains the password settings when running specific transaction types.
                  properties:
                    refundPassword:
                      type: boolean
                      description: Indicates if the terminal should prompt the clerk for a password when running a refund.
                    keyedSalePassword:
                      type: boolean
                      description: Indicates if the terminal should prompt the clerk for a password when running a keyed sale.
                    reversalPassword:
                      type: boolean
                      description: Indicates if the terminal should prompt the clerk for a password when cancelling a transaction.     
            deviceSettings:
              type: object
              description: Object that contains the device settings if the solution includes a terminal or a peripheral device such as a printer.
              properties:
                numberOfMobileUsers:
                  type: number
                  format: integer
                  description: Number of users that we need to set up for mobile solutions.
                communicationType:
                  type: string
                  description: Method of connection between a terminal or a peripheral device and the host.
                  enum:
                    - bluetooth
                    - cellular
                    - ethernet
                    - wifi
                  maxLength: 9
            batchClosure:
              description: Object that contains information about when and how the terminal closes the batch.
              discriminator:
                propertyName: batchCloseType
                mapping:
                  automatic: '#/components/schemas/automaticBatchClose'
                  manual: '#/components/schemas/manualBatchClose'
              oneOf:
                - $ref: '#/components/schemas/automaticBatchClose'
                - $ref: '#/components/schemas/manualBatchClose' 
            receiptNotifications:
              type: object
              description: Object that indicates if the terminal can send email receipts, text receipts, or both.
              properties:
                emailReceipt:
                  description: Indicates if the terminal can send receipts by email.
                  type: boolean
                smsReceipt:
                  description: Indicates if the terminal can send receipts by text message.
                  type: boolean        
            taxes:
              type: array
              description: Array of tax objects that contains the taxes that apply to the merchant's transactions.
              items:
                type: object
                description: Tax that applies to the merchant's transactions.
                properties:
                  taxRate:
                    description: Rate of tax that the terminal applies to each transaction.
                    type: number
                    format: decimal
                    minimum: 0
                    maximum: 99.999
                  taxLabel:
                    type: string
                    description: Short description of the tax rate, for example, "Sales Tax".
                    maxLength: 10
                required:
                  - taxRate
                  - taxLabel
              maxItems: 3
              minItems: 0
            tips:
              type: object
              description: Object that contains the tip options for transactions ran on the terminal.
              properties:
                enabled:
                  type: boolean
                  description: Indicates if the terminal can accept tips.
            tokenization:
              type: boolean
              description: Indicates if the terminal can tokenize customer's payment details. For more information about tokenization, go to [Tokenization.](https://docs.payroc.com/knowledge/basic-concepts/tokenization)
              example: true 
      required:
        - type
        - solutionTemplateId

    createTerminalOrder:
      type: object
      properties:
        trainingProvider:
          $ref: '#/components/schemas/terminalOrder/properties/trainingProvider'  
        shipping:
          $ref: '#/components/schemas/terminalOrder/properties/shipping' 
        orderItems:
          type: array
          description: One or more items to be ordered
          items:
            $ref: '#/components/schemas/orderItem'
          minItems: 1
          maxItems: 20
      required:
        - orderItems 

    paginatedTerminalOrders:
      type: object
      title: paginated Terminal Orders
      allOf:
      - $ref: '../../../common/schemas/common/paginated-list-v1.yaml#/components/schemas/paginatedList'
      - type: object
        properties:
          data:
            type: array
            description: An array of terminal order objects.
            items:
              $ref: '#/components/schemas/terminalOrder'

    links:
      type: object
      description: Array of links related to your request. For more information about HATEOAS, go to [HATEOAS.](https://docs.payroc.com/knowledge/basic-concepts/HATEOAS)
      properties:
        links:
          type: array
          items:
            type: object
            anyOf:
              - $ref: "./processing-terminals-v1.yaml#/components/schemas/processingTerminalSummary"
              
    timezone:
      type: string
      description: |
        Time zone of the terminal. 
        **Note**: If you don't send a value for this parameter, we use the time zone of the processing account.
      enum:
        - Pacific/Midway
        - Pacific/Honolulu
        - America/Anchorage
        - America/Los_Angeles
        - America/Denver
        - America/Phoenix
        - America/Chicago
        - America/Indiana/Indianapolis
        - America/New_York
      example: America/Chicago
      maxLength: 28

    automaticBatchClose:
      type: object
      title: Automatic Batch Close
      description: Indicates how the merchant batches their transactions.
      properties:
        batchCloseType:
          type: string
          description: |
            Indicates how the merchant batches their transactions. Send one of the following:
              - 'automatic' - Terminal automatically closes the batch each day. To set the time the batch closes, send a value for the batchCloseTime parameter.
              - 'manual' - Merchant manually closes their batch.
          enum:
            - automatic
        batchCloseTime:
          type: string
          description: Time that the batch automatically closes.
          example: '23:40'
          maxLength: 5
      required:
        - batchCloseType
    manualBatchClose:
      type: object
      title: Manual Batch Close
      description: Indicates how the merchant batches their transactions.
      properties:
        batchCloseType:
          type: string
          description: |
            Indicates how the merchant batches their transactions. Send one of the following:
              - 'automatic' - Terminal automatically closes the batch each day. To set the time the batch closes, send a value for the batchCloseTime parameter.
              - 'manual' - Merchant manually closes their batch.
          enum:
            - manual
      required: 
        -  batchCloseType