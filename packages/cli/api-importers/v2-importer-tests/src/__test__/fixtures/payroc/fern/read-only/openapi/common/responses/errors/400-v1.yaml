openapi: 3.0.3

paths: {}

info:
  title: Common Domain Models
  description: Common domain models that are shared across the Payroc API
  version: '1'
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com

tags:
  - name: Common responses
    description: Common responses that can be resued

components:
  responses:
    '400':
      description: Invalid request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/400'
          examples:
            badRequest:
              $ref: '#/components/examples/validatorError'
    
  schemas:
    '400':
      type: object
      properties:
        type: 
          type: string
          description: URI reference identifying the problem type
          example: 'https://docs.payroc.com/api/errors#bad-request'
        title:
          type: string
          description: Short description of the issue.
          example: Bad request
        status:
          type: integer
          description: Http status code
          example: 400
        detail:
          type: string
          description: Explanation of the problem
          example: One or more validation errors occurred, see error section for more info
        errors:
          type: array
          items:
            type: object
            properties:
              parameter:
                type: string
                description: The parameter or field causing the issues
                example: start_time
              detail:
                type: string
                description: Short detail of the validation errors
                example: invalid date
              message:
                type: string
                description: Error message
                example: "Expected time, got '' for start_time"
              
      required:
        - type
        - title
        - detail
        - status

  examples:
    validatorError:
     summary: Bad Request
     description: One or more validation errors occurred
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: "One or more validation errors occurred, see error section for more info"
      errors:
        - parameter: start_time
          detail: invalid date
          message: "Expected time, got '' for start_time"
    idempotentKeyMissing:
      summary: Idempotency key missing
      description: Idempotency key must be supplied
      value:
          type: 'https://docs.payroc.com/api/errors#idempotency-key-missing'
          title: 'Idempotency-Key header missing'
          status: 400
          detail: "An 'Idempotency-Key' must be supplied for this request"
    kycCheckFailed:
      summary: KYC check failed
      description: KYC check failed
      value:
        type: 'https://docs.payroc.com/api/errors#kyc-check-failed'
        title: Failed KYC Checks
        status: 400
        detail: Entity has been rejected due to failing KYC checks
    fundingAccountsLimitReached:
      summary: Funding accounts limit reached
      description: Funding accounts restricted. You can not have any more than two funding accounts attached to this entity
      value:
        type: 'https://docs.payroc.com/api/errors#funding-accounts-limit-reached'
        title: Funding accounts limit reached
        status: 400
        detail: You can not have any more than two funding accounts attached to this entity
    noControlProng:
      summary: No control prong or authorized signatory
      description: Your request didnâ€™t indicate which owner is the control prong or the authorized signatory. Set one owner as the control prong or the authorized signatory. 
      value:
        type: 'https://docs.payroc.com/api/errors#no-control-prong-or-authorized-signatory'
        title: No control prong or authorized signatory
        status: 400
        detail: Set one owner as the control prong or the authorized signatory
    tooManyControlProngs:
      summary: Too many control prongs
      description: Your request included more than one owner as the control prong. You can set only one owner as the control prong.
      value:
        type: 'https://docs.payroc.com/api/errors#too-many-control-prongs'
        title: Too many control prongs
        status: 400
        detail: You can set only one owner as the control prong
    dailyDiscountAndRewardPayConflict:
      summary: Cannot select Daily Discount and RewardPayChoice at the same time.
      description: You can't select Daily Discount with a RewardPayChoice pricing plan. To select Daily Discount, choose a different pricing plan.
      value:
        type: 'https://docs.payroc.com/api/errors#daily-discount-and-reward-pay-conflict'
        title: Cannot select Daily Discount and RewardPayChoice at the same time.
        status: 400
        detail: "Choose a different pricing plan or don't select Daily Discount."
