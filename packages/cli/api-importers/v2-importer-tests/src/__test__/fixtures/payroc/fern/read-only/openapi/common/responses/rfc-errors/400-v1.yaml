openapi: 3.0.3

paths: {}

info:
  title: Common Domain Models
  description: Common domain models that are shared across the Payroc API
  version: '1'
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com

tags:
  - name: Common responses
    description: Common responses that can be resued

components:
  responses:
    '400':
      description: Invalid request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/400'
          examples:
            badRequest:
              $ref: '#/components/examples/validatorError'
        
  schemas:
    '400':
      type: object
      properties:
        type: 
          type: string
          description: URI reference identifying the problem type
          example: https://tools.ietf.org/html/rfc7231#section-6.5.1
        title:
          type: string
          description: Short description of the issue.
          example: One or more validation errors occurred.
        status:
          type: integer
          description: Http status code
          example: 400
        detail:
          type: string
          description: Explanation of the problem
          example: One or more validation errors occurred, see error section for more info
        errors:
          type: object
          additionalProperties: true
      required:
        - type
        - title
        - status

  examples:
    validatorError:
     summary: Bad Request
     description: One or more validation errors occurred
     value:
      type: 'https://tools.ietf.org/html/rfc7231#section-6.5.1'
      title: One or more validation errors occurred.
      status: 400
      errors:
        - payrocIdentityId:
          - payrocIdentityId must be a valid Guid
          
    idempotentKeyMissing:
      summary: Idempotency key missing
      description: Idempotency key must be supplied
      value:
          type: 'https://tools.ietf.org/html/rfc7231#section-6.5.1'
          title: Idempotency-Key header missing
          status: 400
          detail: "An 'Idempotency-Key' must be supplied for this request"

    parameterError:
     summary: Bad Request 
     description: One or more validation errors occurred
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: date
          detail: invalid date
          message: "Expected date, got \"abc\""

    paginationError:
     summary: Bad Request 
     description: One or more validation errors occurred
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: before
          detail: invalid value
          message: Expected integer, got abc   