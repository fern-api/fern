openapi: 3.0.3

paths: {}

info:
  title: Common Domain Models
  description: Common domain models that are shared across the Payroc API
  version: '1'
  contact:
    name: Payroc Helpdesk
    url: https://www.payroc.com/help
    email: helpdesk@payroc.com

tags:
  - name: Common schemas
    description: Common schemas that can be resued

components:
  schemas:
    patchRequest:
      type: array
      description: A JSON Patch document as defined by RFC 6902.
      items:
        $ref: '#/components/schemas/patchDocument'
      example:
        - op: add
          path: '/a/b/c'
          value: [dog, cat]
        - op: remove
          path: '/a/b/c'
        - op: replace
          path: '/a/b/c'
          value: 42
        - op: move
          from: '/a/b/c'
          path: '/a/b/d'
        - op: copy
          from: '/a/b/d'
          path: '/a/b/e'
        - op: test
          path: '/a/b/c'
          value: dog

    patchDocument:
      title: Patch Operation
      description: A JSON Patch operation as defined by RFC 6902.
      discriminator:
        propertyName: op
        mapping:
          add: '#/components/schemas/patchAdd'
          remove: '#/components/schemas/patchRemove'
          replace: '#/components/schemas/patchReplace'
          move: '#/components/schemas/patchMove'
          copy: '#/components/schemas/patchCopy'
          test: '#/components/schemas/patchTest'
      oneOf:
        - $ref: '#/components/schemas/patchAdd'
        - $ref: '#/components/schemas/patchRemove'
        - $ref: '#/components/schemas/patchReplace'
        - $ref: '#/components/schemas/patchMove'
        - $ref: '#/components/schemas/patchCopy'
        - $ref: '#/components/schemas/patchTest'

    patchAdd:
      type: object
      title: Patch Add Operation
      description: A Patch Add Operation.
      required:
        - op
        - path
        - value
      properties:
        op:
          type: string
          enum:
            - add
          description: '`add` operation.'
        path:
          type: string
          description: |
            Location where you want to add the value.
            The format for this value is JSON Pointer.
        value:
          description: Value that you want to add to the resource.

    patchRemove:
      type: object
      title: Patch Remove Operation
      description: A Patch Remove Operation.
      required:
        - op
        - path
      properties:
        op:
          type: string
          enum:
            - remove
          description: '`remove` operation.'
        path:
          type: string
          description: |
            Location of the value that you want to remove.
            The format for this value is JSON Pointer.

    patchReplace:
      type: object
      title: Patch Replace Operation
      description: A Patch Replace Operation.
      required:
        - op
        - path
        - value
      properties:
        op:
          type: string
          enum:
            - replace
          description: '`replace` operation.'
        path:
          type: string
          description: |
            Location of the value that you want to replace.
            The format for this value is JSON Pointer.
        value:
          description: Value that you want to use as the replacement.

    patchMove:
      type: object
      title: Patch Move Operation
      description: A Patch Move Operation.
      required:
        - op
        - from
        - path
      properties:
        op:
          type: string
          enum:
            - move
          description: '`move` operation.'
        from:
          type: string
          description: |
            Location of the value that you want to move.
            The format for this value is JSON Pointer.
        path:
          type: string
          description: |
            Location where you want to move the value to.
            The format for this value is JSON Pointer.

    patchCopy:
      type: object
      title: Patch Copy Operation
      description: A Patch Copy Operation.
      required:
        - op
        - from
        - path
      properties:
        op:
          type: string
          enum:
            - copy
          description: '`copy` operation.'
        from:
          type: string
          description: |
            Location of the value that you want to copy.
            The format for this value is JSON Pointer.
        path:
          type: string
          description: |
            Location where you want to copy the value to.
            The format for this value is JSON Pointer.

    patchTest:
      type: object
      title: Patch Test Operation
      description: A Patch Test Operation.
      required:
        - op
        - path
        - value
      properties:
        op:
          type: string
          enum:
            - test
          description: '`test` operation.'
        path:
          type: string
          description: |
            Location of the value that you want to test.
            The format for this value is JSON Pointer.
        value:
          description: Value that you want to compare with the current value at the path.
