openapi: 3.0.3
info:
  title: Payroc API
  version: '1'
paths: {}

components:
  examples:  
    parameterError:
     summary: Bad request 
     description: One or more validation errors occurred.
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: datefrom
          detail: invalid date
          message: 'Expected date, got \"abc\"'

    paginationError:
     summary: Bad request 
     description: One or more validation errors occurred
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: before
          detail: invalid value
          message: Expected integer, got abc

    outsideRecordRange:
     summary: Bad request
     description: Requested data outside allowed range.
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: datefrom
          detail: invalid date
          message: datefrom cannot be longer than two years ago.
    
    listInstructionsExample:
      summary: Paginated instructions list
      value: 
        limit: 2
        count: 2
        hasMore: true
        links:
          - rel: previous
            method: get
            href: https://api.payroc.com/v1/funding-instructions?before=64643131&limit=2&datefrom=2024-07-01&dateto=2024-07-03
          - rel: next
            method: get
            href: https://api.payroc.com/v1/funding-instructions?after=64643132&limit=2&datefrom=2024-07-01&dateto=2024-07-03
        data:
          - instructionId: 64643131
            createdDate: '2024-07-02T15:30:00Z'
            lastModifiedDate: '2024-07-02T15:30:00Z'
            status: completed
            merchants:
              - merchantId: '4525644354'
                recipients:
                - status: funded
                  fundingAccountId: 123
                  paymentMethod: ACH
                  amount:
                    value: 120000
                    currency: USD
                  metadata:
                    yourCustomField: abc123
                  link:
                    rel: fundingAccount
                    method: get
                    href: https://api.payroc.com/v1/funding-accounts/123
                - status: rejected
                  fundingAccountId: 124
                  paymentMethod: ACH
                  amount:
                    value: 50050
                    currency: USD
                  metadata:
                    yourCustomField: abc123
                  link:
                    rel: fundingAccount
                    method: get
                    href: https://api.payroc.com/v1/funding-accounts/124
                link:
                  rel: merchant
                  method: get
                  href: https://api.payroc.com/v1/merchants/4525644354
            metadata:
              yourCustomField: abc123
            link:
              rel: fundingInstruction
              method: get
              href: https://api.payroc.com/v1/funding-instructions/64643131
          - instructionId: 64643132
            createdDate: '2024-07-02T15:30:00Z'
            lastModifiedDate: '2024-07-02T15:30:00Z'
            status: accepted
            merchants:
              - merchantId: '4525644354'
                recipients:
                - status: accepted
                  fundingAccountId: 123
                  paymentMethod: ACH
                  amount:
                    value: 5000
                    currency: USD
                  metadata:
                    yourCustomField: abc123
                  link:
                    rel: fundingAccount
                    method: get
                    href: https://api.payroc.com/v1/funding-accounts/123
                link:
                  rel: merchant
                  method: get
                  href: https://api.payroc.com/v1/merchants/4525644354
              - merchantId: '4525644354'
                recipients:
                - status: accepted
                  fundingAccountId: 124
                  paymentMethod: ACH
                  amount:
                    value: 1000
                    currency: USD
                  metadata:
                    yourCustomField: abc123
                  link:
                    rel: fundingAccount
                    method: get
                    href: https://api.payroc.com/v1/funding-accounts/124
                link:
                  rel: merchant
                  method: get
                  href: https://api.payroc.com/v1/merchants/4525644354
            metadata:
              yourCustomField: abc123
            link:
              rel: fundingInstruction
              method: get
              href: https://api.payroc.com/v1/funding-instructions/64643132
    
    newInstructionAccepted:
      summary: New instruction accepted.
      value:
        instructionId: 64643131
        createdDate: '2024-07-02T15:30:00Z'
        lastModifiedDate: '2024-07-02T15:30:00Z'
        status: accepted
        merchants:
          - merchantId: '4525644354'
            recipients:
            - status: accepted
              fundingAccountId: 123
              paymentMethod: ACH
              amount:
                value: 120000
                currency: USD
              metadata:
                yourCustomField: abc123
              link: 
                rel: fundingAccount
                method: get
                href: 'https://api.payroc.com/v1/funding-accounts/123'
            link: 
              rel: merchant
              method: get
              href: 'https://api.payroc.com/v1/merchants/4525644354'
        metadata:
          instructionRef: abc123
    
    insufficientFunds:
      summary: Insufficient funds
      description: You do not have enough funds to complete the request.
      value:
        type: 'https://docs.payroc.com/api/errors#insufficient-funds'
        title: Insufficient funds
        status: 400
        detail: You do not have the required funds to complete this transaction

    instructionIdError:
     summary: Bad request
     description: One or more validation errors occurred.
     value:
      type: 'https://docs.payroc.com/api/errors#bad-request'
      title: Bad request
      status: 400
      detail: One or more validation errors occurred, see error section for more info
      errors:
        - parameter: instructionId
          detail: invalid value
          message: Expected integer, got abc

    fundingAccountsRestricted:
      summary: Funding accounts restricted
      description: Funding accounts restricted.
      value:
        type: 'https://docs.payroc.com/api/errors#funding-accounts-restricted'
        title: Funding accounts restricted
        status: 400
        detail: "One or more funding accounts are restricted and can't receive funding instructions"
        errors:
          - parameter: fundingAccountId
            message: Funding account on hold
