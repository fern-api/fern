openapi: 3.0.3
info:
  title: AllOf AnyOf Undiscriminated Test API
  version: 1.0.0
  description: Test API for allOf containing anyOf (resolves to any in undiscriminated union)

servers:
  - url: https://api.example.com/v1

paths:
  /contact:
    post:
      tags:
        - Contact
      summary: Add contact information
      description: Demonstrates allOf containing anyOf pattern
      operationId: addContact
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddContactArgs"
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean

components:
  schemas:
    AddContactArgs:
      allOf:
        - anyOf:
            - type: object
              properties:
                phoneNumber:
                  type: string
                  description: Phone number
                  pattern: "^\\d{10}$"
              required:
                - phoneNumber
            - type: object
              properties:
                email:
                  type: string
              required:
                - email
        - type: object
          properties:
            merchantId:
              type: string
