# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml
  environment: environment.yml
  types: types.yml

types:
  # Extended Examples

  WithV2Examples:
    properties:
      v2Examples: optional<V2SchemaExamples>

  # HTTP Endpoint Examples

  V2HttpEndpointExamples:
    properties:
      userSpecifiedExamples: map<string, V2HttpEndpointExample>
      autogeneratedExamples: map<string, V2HttpEndpointExample>

  V2HttpEndpointExample:
    properties:
      request: optional<V2HttpEndpointRequest>
      response: optional<V2HttpEndpointResponse>
      codeSamples: optional<list<V2HttpEndpointCodeSample>>

  V2HttpEndpointRequest:
    extends: commons.WithDocs
    properties:
      endpoint: V2EndpointLocation
      baseURL: optional<string>
      environment: optional<V2EnvironmentValues>
      auth: optional<V2AuthValues>
      pathParameters: optional<V2ValueExamples>
      queryParameters: optional<V2ValueExamples>
      headers: optional<V2ValueExamples>
      requestBody: optional<unknown>

  V2HttpEndpointResponse:
    extends: commons.WithDocs
    properties:
      statusCode: optional<integer>
      body: optional<V2HttpEndpointResponseBody>

  V2HttpEndpointResponseBody:
    union:
      error: unknown
      json: unknown
      stream: list<unknown>

  V2HttpEndpointCodeSample:
    extends: commons.WithDocs
    properties:
      language: string
      code: string

  # WebSocket Session Examples

  V2WebSocketSessionExamples:
    properties:
      autogeneratedExamples: map<string, V2WebSocketSessionExample>
      userSpecifiedExamples: map<string, V2WebSocketSessionExample>

  V2WebSocketSessionExample:
    properties:
      channel: V2WebSocketEndpointLocation
      baseURL: optional<string>
      environment: optional<V2EnvironmentValues>
      auth: optional<V2AuthValues>
      pathParameters: optional<V2ValueExamples>
      queryParameters: optional<V2ValueExamples>
      headers: optional<V2ValueExamples>
      messages: optional<list<V2WebSocketMessageExample>>

  V2WebSocketMessageExample:
    properties:
      type:
        type: string
        docs: The same as websocket.WebsocketMessageId
      body: unknown

  # Webhook Examples

  V2WebhookExamples:
    properties:
      userSpecifiedExamples: map<string, V2WebhookExample>
      autogeneratedExamples: map<string, V2WebhookExample>

  V2WebhookExample:
    properties:
      name: optional<string>
      payload: unknown

  # Schema, Property, and Parameter Types

  V2SchemaExamples:
    properties:
      userSpecifiedExamples: map<string, V2SchemaExample>
      autogeneratedExamples: map<string, V2SchemaExample>

  V2SchemaExample:
    type: unknown

  # Simplified Example Types

  V2ValueExamples:
    type: map<string, unknown>

  V2WebSocketEndpointLocation:
    properties:
      path: string

  V2EndpointLocation:
    properties:
      method: V2EndpointLocationHttpMethod
      path: string

  V2EndpointLocationHttpMethod:
    enum:
      - GET
      - POST
      - PUT
      - PATCH
      - DELETE
      - HEAD

  V2EnvironmentValues:
    discriminated: false
    union:
      - environment.EnvironmentId
      - MultipleEnvironmentUrlValues

  MultipleEnvironmentUrlValues:
    type: map<environment.EnvironmentBaseUrlId, environment.EnvironmentUrl>

  V2AuthValues:
    union:
      basic: BasicAuthValues
      bearer: BearerAuthValues
      header: HeaderAuthValues
      oauth: OAuthValues

  BasicAuthValues:
    properties:
      username: string
      password: string

  BearerAuthValues:
    properties:
      token: string

  HeaderAuthValues:
    properties:
      value: unknown

  OAuthValues:
    properties:
      clientId: string
      clientSecret: string
