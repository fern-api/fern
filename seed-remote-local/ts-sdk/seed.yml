displayName: TypeScript SDK (Remote vs Local)
irVersion: v61
image: fernapi/fern-typescript-sdk
changelogLocation: ../../generators/typescript/sdk/versions.yml

test:
  local:
    workingDirectory: generators/typescript
    buildCommand:
      - pnpm --filter @fern-typescript/sdk-generator-cli dist:cli
    runCommand: node --enable-source-maps sdk/cli/dist/cli.cjs {CONFIG_PATH}
    env:
      NODE_ENV: test

language: typescript
generatorType: SDK
defaultOutputMode: github

# Remote vs Local testing with GitHub PR output
# Uses ephemeral GitHub repos injected by test runner
fixtures:
  imdb:
    # Remote generation (uses Fiddle cloud service)
    - outputFolder: remote
      customConfig: null
      publishConfig:
        type: npm
        packageName: "@fern-test/imdb-sdk"
        token: ""
      github:
        repository: ${GITHUB_TEST_REPO}
        mode: pull-request

    # Local generation (uses Docker)
    - outputFolder: local
      customConfig: null
      publishConfig:
        type: npm
        packageName: "@fern-test/imdb-sdk"
        token: ""
      github:
        uri: ${GITHUB_TEST_REPO}
        token: ${GITHUB_TOKEN}
        mode: pull-request
