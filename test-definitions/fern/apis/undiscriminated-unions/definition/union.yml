service:
  auth: false
  base-path: /
  endpoints:
    get:
      path: ""
      method: POST
      request: MyUnion
      response: MyUnion

    getMetadata:
      path: "/metadata"
      method: GET
      response: Metadata
      examples:
        - response:
            body:
              name: exampleName
              value: exampleValue
              default: exampleDefault

    updateMetadata:
      path: "/metadata"
      method: PUT
      request: MetadataUnion
      response: boolean
      examples:
        - request:
            string:
              key: value
          response:
            body: true

    call:
      path: "/call"
      method: POST
      request: Request
      response: boolean
      examples:
        - request:
            union:
              string:
                key: value
          response:
            body: true

    duplicateTypesUnion:
      path: "/duplicate"
      method: POST
      request: UnionWithDuplicateTypes
      response: UnionWithDuplicateTypes

    nestedUnions:
      path: "/nested"
      method: POST
      request: NestedUnionRoot
      response: string

    testCamelCaseProperties:
      path: "/camel-case"
      method: POST
      request:
        name: PaymentRequest
        body:
          properties:
            paymentMethod: PaymentMethodUnion
      response: string
      examples:
        - request:
            paymentMethod:
              method: card
              tokenId: tok_123
          response:
            body: success

types:
  Request:
    properties:
      union: optional<MetadataUnion>

  TypeWithOptionalUnion:
    properties:
      myUnion: optional<MyUnion>

  MyUnion:
    docs: |
      Several different types are accepted.
    discriminated: false
    union:
      - string
      - list<string>
      - integer
      - list<integer>
      - list<list<integer>>
      - set<string>

  NestedUnionL2:
    docs: |
      Nested layer 2.
    discriminated: false
    union:
      - boolean
      - set<string>
      - list<string>

  NestedUnionL1:
    docs: |
      Nested layer 1.
    discriminated: false
    union:
      - integer
      - set<string>
      - list<string>
      - NestedUnionL2

  NestedUnionRoot:
    docs: |
      Nested union root.
    discriminated: false
    union:
      - string
      - list<string>
      - NestedUnionL1

  UnionWithDuplicateTypes:
    docs: |
      Duplicate types.
    discriminated: false
    union:
      - string
      - list<string>
      - integer
      - list<string>
      - set<string>

  MetadataUnion:
    discriminated: false
    union:
      - OptionalMetadata
      - NamedMetadata

  NamedMetadata:
    properties:
      name: string
      value: map<string, unknown>

  OptionalMetadata:
    type: optional<map<string, unknown>>

  Metadata:
    docs: |
      Undiscriminated unions can act as a map key
      as long as all of their values are valid keys
      (i.e. do they have a valid string representation).
    type: map<Key, string>
    examples:
      - value:
          name: exampleName
          value: exampleValue
          default: exampleDefault

  Key:
    discriminated: false
    union:
      - KeyType
      - literal<"default">

  KeyType:
    enum:
      - name
      - value

  # Test cases for undiscriminated unions with identical underlying Java types
  UnionWithIdenticalStrings:
    docs: |
      Multiple string types that all resolve to String in Java.
      This tests the fix for duplicate method signatures.
    discriminated: false
    union:
      - string
      - string
      - string

  UnionWithIdenticalPrimitives:
    docs: |
      Mix of primitives where some resolve to the same Java type.
    discriminated: false
    union:
      - integer
      - integer
      - double
      - double
      - string
      - string

  # Test case for undiscriminated unions with object members that have camelCase wire names
  PaymentMethodUnion:
    docs: |
      Tests that nested properties with camelCase wire names are properly
      converted from snake_case Ruby keys when passed as Hash values.
    discriminated: false
    union:
      - TokenizeCard
      - ConvertToken

  TokenizeCard:
    properties:
      method: string
      cardNumber: string

  ConvertToken:
    properties:
      method: string
      tokenId: string
