imports:
  root: __package__.yml
types:
  AddNotificationRequest:
    discriminated: false

    union:
      - type: root.NotificationStandardRequest
        display-name: Notification
        docs: Create a standard webhook, email, or SMS notification.
      - type: root.NotificationReportRequest
        display-name: Report
        docs: Create an auto-generated report.
  UpdateNotificationRequest:
    discriminated: false

    union:
      - type: root.NotificationStandardRequest
      - type: root.NotificationReportRequest
service:
  auth: false
  base-path: ''
  endpoints:
    AddNotification:
      auth: true
      display-name: Add notification
      docs: 'Create a new notification or autogenerated report. '
      examples:
        - name: Webhook
          request:
            content:
              eventType: CreatedApplication
            frequency: untilcancelled
            method: web
            ownerId: '236'
            ownerType: 0
            status: 1
            target: https://webhook.site/2871b8f8-edc7-441a-b376-98d8c8e33275
          response:
            body:
              isSuccess: true
              responseCode: 1
              responseData: 1717
              responseText: Success
        - name: ReportExample
          request:
            content:
              eventType: Report
              fileFormat: json
              reportName: Transaction
              timeZone: -5
              transactionId: '0'
            frequency: biweekly
            method: report-email
            ownerId: '236'
            ownerType: 0
            status: 1
            target: admin@example.com
          response:
            body:
              isSuccess: true
              responseCode: 1
              responseData: 1717
              responseText: Success
      method: POST
      path: /Notification
      request:
        body: AddNotificationRequest
        content-type: application/json
      response:
        docs: Success
        status-code: 200
        type: root.PayabliApiResponseNotifications
      
    DeleteNotification:
      auth: true
      display-name: Delete notification
      docs: Deletes a single notification or autogenerated report.
      examples:
        - name: Delete
          path-parameters:
            nId: "1717"
          response:
            body:
              isSuccess: true
              responseCode: 1
              responseData: 1717
              responseText: Success
      method: DELETE
      path: /Notification/{nId}
      path-parameters:
        nId:
          docs: 'Notification ID. '
          type: string
      response:
        docs: Success
        status-code: 200
        type: root.PayabliApiResponseNotifications
      
    GetNotification:
      auth: true
      display-name: Get notification
      docs: |
        Retrieves a single notification or autogenerated report's details.
      examples:
        - name: Get
          path-parameters:
            nId: "1717"
          response:
            body:
              content:
                fileFormat: csv
                reportName: Returned
              createdAt: '2024-02-21T09:16:31Z'
              frequency: weekly
              lastUpdated: '2024-02-21T09:16:31Z'
              method: report-email
              notificationId: 1717
              ownerId: '123'
              ownerName: The Pilgrim Planner
              ownerType: 0
              status: 1
              target: admin@business.com
      method: GET
      path: /Notification/{nId}
      path-parameters:
        nId:
          docs: 'Notification ID. '
          type: string
      response:
        docs: Success
        status-code: 200
        type: root.NotificationQueryRecord
      
    UpdateNotification:
      auth: true
      display-name: Update notification
      docs: 'Update a notification or autogenerated report. '

      examples:
        - name: Update
          path-parameters:
            nId: "1717"
          request:
            content:
              eventType: ApprovedPayment
            frequency: untilcancelled
            method: email
            ownerId: '136'
            ownerType: 0
            status: 1
            target: newemail@email.com
          response:
            body:
              isSuccess: true
              responseCode: 1
              responseData: 1717
              responseText: Success
      method: PUT
      path: /Notification/{nId}
      path-parameters:
        nId:
          docs: 'Notification ID. '
          type: string
      request:
        body: UpdateNotificationRequest
        content-type: application/json
      response:
        docs: Success
        status-code: 200
        type: root.PayabliApiResponseNotifications
  
    GetReportFile:
      auth: true
      display-name: Export Generated Report by ID
      docs: Gets a copy of a generated report by ID.
      examples:
        - path-parameters:
            Id: 1000000
          response:
            body:
              key: value
      method: GET
      path: /Export/notificationReport/{Id}
      path-parameters:
        Id:
          docs: Report ID
          type: long
      response:
        docs: Success
        status-code: 200
        type: root.File
      

