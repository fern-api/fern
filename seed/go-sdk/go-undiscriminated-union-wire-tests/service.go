// Code generated by Fern. DO NOT EDIT.

package fern

import (
	json "encoding/json"
	fmt "fmt"
	internal "github.com/go-undiscriminated-union-wire-tests/fern/internal"
	big "math/big"
)

type DocumentItem struct {
	String         string
	DocumentObject *DocumentObject

	typ string
}

func (d *DocumentItem) GetString() string {
	if d == nil {
		return ""
	}
	return d.String
}

func (d *DocumentItem) GetDocumentObject() *DocumentObject {
	if d == nil {
		return nil
	}
	return d.DocumentObject
}

func (d *DocumentItem) UnmarshalJSON(data []byte) error {
	var valueString string
	if err := json.Unmarshal(data, &valueString); err == nil {
		d.typ = "String"
		d.String = valueString
		return nil
	}
	valueDocumentObject := new(DocumentObject)
	if err := json.Unmarshal(data, &valueDocumentObject); err == nil {
		d.typ = "DocumentObject"
		d.DocumentObject = valueDocumentObject
		return nil
	}
	return fmt.Errorf("%s cannot be deserialized as a %T", data, d)
}

func (d DocumentItem) MarshalJSON() ([]byte, error) {
	if d.typ == "String" || d.String != "" {
		return json.Marshal(d.String)
	}
	if d.typ == "DocumentObject" || d.DocumentObject != nil {
		return json.Marshal(d.DocumentObject)
	}
	return nil, fmt.Errorf("type %T does not include a non-empty union type", d)
}

type DocumentItemVisitor interface {
	VisitString(string) error
	VisitDocumentObject(*DocumentObject) error
}

func (d *DocumentItem) Accept(visitor DocumentItemVisitor) error {
	if d.typ == "String" || d.String != "" {
		return visitor.VisitString(d.String)
	}
	if d.typ == "DocumentObject" || d.DocumentObject != nil {
		return visitor.VisitDocumentObject(d.DocumentObject)
	}
	return fmt.Errorf("type %T does not include a non-empty union type", d)
}

var (
	documentObjectFieldText = big.NewInt(1 << 0)
)

type DocumentObject struct {
	Text string `json:"text" url:"text"`

	// Private bitmask of fields set to an explicit value and therefore not to be omitted
	explicitFields *big.Int `json:"-" url:"-"`

	extraProperties map[string]interface{}
	rawJSON         json.RawMessage
}

func (d *DocumentObject) GetText() string {
	if d == nil {
		return ""
	}
	return d.Text
}

func (d *DocumentObject) GetExtraProperties() map[string]interface{} {
	return d.extraProperties
}

func (d *DocumentObject) require(field *big.Int) {
	if d.explicitFields == nil {
		d.explicitFields = big.NewInt(0)
	}
	d.explicitFields.Or(d.explicitFields, field)
}

// SetText sets the Text field and marks it as non-optional;
// this prevents an empty or null value for this field from being omitted during serialization.
func (d *DocumentObject) SetText(text string) {
	d.Text = text
	d.require(documentObjectFieldText)
}

func (d *DocumentObject) UnmarshalJSON(data []byte) error {
	type unmarshaler DocumentObject
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*d = DocumentObject(value)
	extraProperties, err := internal.ExtractExtraProperties(data, *d)
	if err != nil {
		return err
	}
	d.extraProperties = extraProperties
	d.rawJSON = json.RawMessage(data)
	return nil
}

func (d *DocumentObject) MarshalJSON() ([]byte, error) {
	type embed DocumentObject
	var marshaler = struct {
		embed
	}{
		embed: embed(*d),
	}
	explicitMarshaler := internal.HandleExplicitFields(marshaler, d.explicitFields)
	return json.Marshal(explicitMarshaler)
}

func (d *DocumentObject) String() string {
	if len(d.rawJSON) > 0 {
		if value, err := internal.StringifyJSON(d.rawJSON); err == nil {
			return value
		}
	}
	if value, err := internal.StringifyJSON(d); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", d)
}

var (
	rerankRequestFieldDocuments = big.NewInt(1 << 0)
	rerankRequestFieldQuery     = big.NewInt(1 << 1)
)

type RerankRequest struct {
	Documents []*DocumentItem `json:"documents" url:"documents"`
	Query     string          `json:"query" url:"query"`

	// Private bitmask of fields set to an explicit value and therefore not to be omitted
	explicitFields *big.Int `json:"-" url:"-"`

	extraProperties map[string]interface{}
	rawJSON         json.RawMessage
}

func (r *RerankRequest) GetDocuments() []*DocumentItem {
	if r == nil {
		return nil
	}
	return r.Documents
}

func (r *RerankRequest) GetQuery() string {
	if r == nil {
		return ""
	}
	return r.Query
}

func (r *RerankRequest) GetExtraProperties() map[string]interface{} {
	return r.extraProperties
}

func (r *RerankRequest) require(field *big.Int) {
	if r.explicitFields == nil {
		r.explicitFields = big.NewInt(0)
	}
	r.explicitFields.Or(r.explicitFields, field)
}

// SetDocuments sets the Documents field and marks it as non-optional;
// this prevents an empty or null value for this field from being omitted during serialization.
func (r *RerankRequest) SetDocuments(documents []*DocumentItem) {
	r.Documents = documents
	r.require(rerankRequestFieldDocuments)
}

// SetQuery sets the Query field and marks it as non-optional;
// this prevents an empty or null value for this field from being omitted during serialization.
func (r *RerankRequest) SetQuery(query string) {
	r.Query = query
	r.require(rerankRequestFieldQuery)
}

func (r *RerankRequest) UnmarshalJSON(data []byte) error {
	type unmarshaler RerankRequest
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*r = RerankRequest(value)
	extraProperties, err := internal.ExtractExtraProperties(data, *r)
	if err != nil {
		return err
	}
	r.extraProperties = extraProperties
	r.rawJSON = json.RawMessage(data)
	return nil
}

func (r *RerankRequest) MarshalJSON() ([]byte, error) {
	type embed RerankRequest
	var marshaler = struct {
		embed
	}{
		embed: embed(*r),
	}
	explicitMarshaler := internal.HandleExplicitFields(marshaler, r.explicitFields)
	return json.Marshal(explicitMarshaler)
}

func (r *RerankRequest) String() string {
	if len(r.rawJSON) > 0 {
		if value, err := internal.StringifyJSON(r.rawJSON); err == nil {
			return value
		}
	}
	if value, err := internal.StringifyJSON(r); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", r)
}

var (
	rerankResponseFieldResults = big.NewInt(1 << 0)
)

type RerankResponse struct {
	Results []string `json:"results" url:"results"`

	// Private bitmask of fields set to an explicit value and therefore not to be omitted
	explicitFields *big.Int `json:"-" url:"-"`

	extraProperties map[string]interface{}
	rawJSON         json.RawMessage
}

func (r *RerankResponse) GetResults() []string {
	if r == nil {
		return nil
	}
	return r.Results
}

func (r *RerankResponse) GetExtraProperties() map[string]interface{} {
	return r.extraProperties
}

func (r *RerankResponse) require(field *big.Int) {
	if r.explicitFields == nil {
		r.explicitFields = big.NewInt(0)
	}
	r.explicitFields.Or(r.explicitFields, field)
}

// SetResults sets the Results field and marks it as non-optional;
// this prevents an empty or null value for this field from being omitted during serialization.
func (r *RerankResponse) SetResults(results []string) {
	r.Results = results
	r.require(rerankResponseFieldResults)
}

func (r *RerankResponse) UnmarshalJSON(data []byte) error {
	type unmarshaler RerankResponse
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*r = RerankResponse(value)
	extraProperties, err := internal.ExtractExtraProperties(data, *r)
	if err != nil {
		return err
	}
	r.extraProperties = extraProperties
	r.rawJSON = json.RawMessage(data)
	return nil
}

func (r *RerankResponse) MarshalJSON() ([]byte, error) {
	type embed RerankResponse
	var marshaler = struct {
		embed
	}{
		embed: embed(*r),
	}
	explicitMarshaler := internal.HandleExplicitFields(marshaler, r.explicitFields)
	return json.Marshal(explicitMarshaler)
}

func (r *RerankResponse) String() string {
	if len(r.rawJSON) > 0 {
		if value, err := internal.StringifyJSON(r.rawJSON); err == nil {
			return value
		}
	}
	if value, err := internal.StringifyJSON(r); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", r)
}
