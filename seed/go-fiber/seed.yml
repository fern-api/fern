irVersion: v58
displayName: Fiber
image: fernapi/fern-go-fiber
changelogLocation: ../../generators/go/fiber/versions.yml

buildScripts:
  compileScript:
    commands:
      - go build -v ./...
  testScript:
    commands:
      - go test -v ./...

publish:
  workingDirectory: generators/go
  preBuildCommands:
    - go build ./...
    - pnpm turbo run dist:cli --filter @fern-api/go-sdk
  docker:
    file: ./generators/go/fiber/Dockerfile
    image: fernapi/fern-go-fiber
    context: .
test:
  docker:
    image: fernapi/fern-go-fiber:latest
    command: pnpm turbo run dist:cli --filter @fern-api/go-sdk && docker build -f ./generators/go/fiber/Dockerfile -t fernapi/fern-go-fiber:latest .
  podman:
    image: fernapi/fern-go-fiber:latest
    command: pnpm turbo run dist:cli --filter @fern-api/go-sdk && podman build -f ./generators/go/fiber/Dockerfile -t fernapi/fern-go-fiber:latest .
language: go
generatorType: Model
defaultOutputMode: github
fixtures:
  streaming:
    - outputFolder: .
      outputVersion: v2.0.0
      customConfig:
        packageName: stream
        module:
          path: github.com/fern-api/stream-go
  idempotency-headers:
    - outputFolder: .
      outputVersion: 0.0.1
      customConfig:
        packageName: fern
        module:
          path: github.com/idempotency-headers/fern
        includeLegacyClientOptions: true
scripts:
  - image: golang:1.23.8-alpine3.20
    commands:
      - CGO_ENABLED=0 go test ./...
allowedFailures:
  - alias-extends
  - exhaustive
  - literal
  - mixed-case
  - reserved-keywords
  - trace
  - request-parameters
  - property-access
