changelogLocation: ../../packages/cli/cli/versions.yml
publishGa:
  workingDirectory: packages/cli/cli
  versionSubstitution: $VERSION
  command:
    - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc
    - pnpm install
    - pnpm turbo run compile --filter @fern-api/cli
    - pnpm turbo run dist:cli:prod --filter @fern-api/cli -- $VERSION
    - pnpm --filter @fern-api/cli publish:cli:prod --tag latest
publishRc:
  workingDirectory: packages/cli/cli
  versionSubstitution: $VERSION
  command:
    - echo "//registry.npmjs.org/:_authToken=${NPM_TOKEN}" > ~/.npmrc
    - pnpm install
    - pnpm turbo run compile --filter @fern-api/cli
    - pnpm turbo run dist:cli:prod --filter @fern-api/cli -- $VERSION
    - pnpm --filter @fern-api/cli publish:cli:prod --tag prerelease
publishDev:
  workingDirectory: packages/cli/cli
  versionSubstitution: $VERSION
  command:
    - pnpm install
    - pnpm turbo run compile --filter @fern-api/cli
    - pnpm turbo run dist:cli:dev --filter @fern-api/cli -- $VERSION
    - pnpm --filter @fern-api/cli publish:cli:dev --access restricted