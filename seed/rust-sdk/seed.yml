irVersion: v59
displayName: Rust SDK
image: fernapi/fern-rust-sdk
changelogLocation: ../../generators/rust/sdk/versions.yml

buildScripts:
  compileScript:
    commands:
      - cargo build --all-features
  testScript:
    commands:
      - cargo test

publish:
  workingDirectory: generators/rust
  preBuildCommands:
    - pnpm --filter @fern-api/rust-sdk dist:cli
  docker:
    file: ./generators/rust/sdk/Dockerfile
    image: fernapi/fern-rust-sdk
    context: .

test:
  docker:
    image: fernapi/fern-rust-sdk:latest
    command: pnpm --filter @fern-api/rust-sdk dist:cli && docker build -f ./generators/rust/sdk/Dockerfile -t fernapi/fern-rust-sdk:latest .
  local:
    workingDirectory: generators/rust
    buildCommand:
      - pnpm --filter @fern-api/rust-sdk dist:cli
    runCommand: node --enable-source-maps ./sdk/dist/cli.cjs {CONFIG_PATH}

language: rust
generatorType: SDK
defaultOutputMode: github

customFixtureConfig:
  customConfig:
    packageName: test_sdk
    packageVersion: "0.1.0"

fixtures:
  simple:
    - customConfig: null
      outputFolder: basic
  examples:
    - customConfig: null
      outputFolder: no-custom-config
    - customConfig:
        customReadmeSections:
          - title: "Override Section"
            content: "Override Content"
          - title: "Generator Invocation Custom Section"
            content: "Generator Invocation Custom Content for {{ packageName }}:{{ version }}"
      readmeConfig:
        apiName: "CustomName"
        disabledSections:
          - apiReference
        bannerLink: https://www.fernapi.com
        apiReferenceLink: https://www.docs.fernapi.com
        defaultEndpoint: POST /movie
        customSections:
          - title: "Base Readme Custom Section"
            language: rust
            content: "Base Readme Custom Content for {{ packageName }}:{{ version }}"
          - title: "Override Section"
            language: rust
            content: "Base Content"
        features:
          timeouts:
            - GET /movie/{movieId}
      outputFolder: readme-config
  imdb:
    - customConfig:
        clientName: ImdbClient
      outputFolder: imdb 

