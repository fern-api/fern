// This file was auto-generated by Fern from our API Definition.

import * as core from "../core/index.js";
import * as errors from "../errors/index.js";

export namespace HeaderAuthProvider {
    export interface Options {
        headerTokenAuth: core.Supplier<string>;
    }
}

export class HeaderAuthProvider implements core.AuthProvider {
    private readonly headerValue: core.Supplier<string>;

    constructor(options: HeaderAuthProvider.Options) {
        this.headerValue = options.headerTokenAuth;
    }

    public static canCreate(options: HeaderAuthProvider.Options): boolean {
        return options.headerTokenAuth != null;
    }

    public async getAuthRequest(_arg?: { endpointMetadata?: core.EndpointMetadata }): Promise<core.AuthRequest> {
        const headerTokenAuth = await core.Supplier.get(this.headerValue);
        if (headerTokenAuth == null) {
            throw new errors.SeedHeaderTokenError({
                message: "Please specify a headerTokenAuth by passing it in to the constructor",
            });
        }

        const headerValue = `test_prefix ${headerTokenAuth}`;

        return {
            headers: { "x-api-key": headerValue },
        };
    }
}
