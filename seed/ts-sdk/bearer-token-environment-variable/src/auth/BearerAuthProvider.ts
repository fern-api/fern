// This file was auto-generated by Fern from our API Definition.

import * as core from "../core/index.js";
import * as errors from "../errors/index.js";

export namespace BearerAuthProvider {
    export interface Options {
        apiKey?: core.Supplier<core.BearerToken | undefined>;
    }
}

export class BearerAuthProvider implements core.AuthProvider {
    private readonly token: core.Supplier<core.BearerToken | undefined> | undefined;

    constructor(options: BearerAuthProvider.Options) {
        this.token = options.apiKey;
    }

    public async getAuthRequest(): Promise<core.AuthRequest> {
        const apiKey = (await core.Supplier.get(this.token)) ?? process.env?.COURIER_API_KEY;
        if (apiKey == null) {
            throw new errors.SeedBearerTokenEnvironmentVariableError({
                message:
                    "Please specify a apiKey by either passing it in to the constructor or initializing a COURIER_API_KEY environment variable",
            });
        }

        return {
            headers: { Authorization: `Bearer ${apiKey}` },
        };
    }
}
