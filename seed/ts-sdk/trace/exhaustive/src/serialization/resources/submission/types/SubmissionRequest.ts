/**
 * This file was auto-generated by Fern from our API Definition.
 */

import * as serializers from "../../../index";
import * as SeedTrace from "../../../../api/index";
import * as core from "../../../../core";
import { InitializeProblemRequest } from "./InitializeProblemRequest";
import { SubmitRequestV2 } from "./SubmitRequestV2";
import { WorkspaceSubmitRequest } from "./WorkspaceSubmitRequest";
import { StopRequest } from "./StopRequest";

export const SubmissionRequest: core.serialization.Schema<
    serializers.SubmissionRequest.Raw,
    SeedTrace.SubmissionRequest
> = core.serialization
    .union("type", {
        initializeProblemRequest: InitializeProblemRequest,
        initializeWorkspaceRequest: core.serialization.object({}),
        submitV2: SubmitRequestV2,
        workspaceSubmit: WorkspaceSubmitRequest,
        stop: StopRequest,
    })
    .transform<SeedTrace.SubmissionRequest>({
        transform: (value) => {
            switch (value.type) {
                case "initializeProblemRequest":
                    return SeedTrace.SubmissionRequest.initializeProblemRequest(value);
                case "initializeWorkspaceRequest":
                    return SeedTrace.SubmissionRequest.initializeWorkspaceRequest();
                case "submitV2":
                    return SeedTrace.SubmissionRequest.submitV2(value);
                case "workspaceSubmit":
                    return SeedTrace.SubmissionRequest.workspaceSubmit(value);
                case "stop":
                    return SeedTrace.SubmissionRequest.stop(value);
                default:
                    return SeedTrace.SubmissionRequest._unknown(value);
            }
        },
        untransform: ({ _visit, ...value }) => value as any,
    });

export declare namespace SubmissionRequest {
    type Raw =
        | SubmissionRequest.InitializeProblemRequest
        | SubmissionRequest.InitializeWorkspaceRequest
        | SubmissionRequest.SubmitV2
        | SubmissionRequest.WorkspaceSubmit
        | SubmissionRequest.Stop;

    interface InitializeProblemRequest extends InitializeProblemRequest.Raw {
        type: "initializeProblemRequest";
    }

    interface InitializeWorkspaceRequest {
        type: "initializeWorkspaceRequest";
    }

    interface SubmitV2 extends SubmitRequestV2.Raw {
        type: "submitV2";
    }

    interface WorkspaceSubmit extends WorkspaceSubmitRequest.Raw {
        type: "workspaceSubmit";
    }

    interface Stop extends StopRequest.Raw {
        type: "stop";
    }
}
